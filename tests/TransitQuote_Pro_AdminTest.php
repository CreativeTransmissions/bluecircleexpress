<?php
declare(strict_types=1);
use PHPUnit\Framework\TestCase;

final class TransitQuote_Pro_AdminTest extends TestCase
{
    protected function setUp()
    {
        parent::setUp();
        $this->test_job2 = json_decode('{"id":"17","delivery_contact_name":"","delivery_time":"2019-08-12 17:00:00","description":"54ew5","dimensions":"","customer_id":"4","accepted_quote_id":"17","payment_type_id":"1","payment_status_id":"1","status_type_id":"1","vehicle_id":"1","service_id":"1","move_size_id":"0","created":"2019-08-12 16:47:41","modified":"2019-08-12 16:47:41","customer":{"id":"4","wp_user_id":"0","first_name":"sdfdsf","last_name":"dsfdsfd","email":"sdfdsf@dsfdsf.com","phone":"435345345","created":"2019-08-12 16:47:41","modified":"2019-08-12 16:47:41"},"journey":{"id":"17","job_id":"17","distance":"75.0200","time":"1.09","deliver_and_return":null,"optimize_route":null,"created":"2019-08-12 16:47:41","modified":"2019-08-12 16:47:41"},"stops":[{"id":"7","address":"Edinburgh, UK","appartment_no":"","street_number":"","postal_town":"","route":"","administrative_area_level_2":"Edinburgh","administrative_area_level_1":"Scotland","country":"United Kingdom","postal_code":"","lat":"55.95325200000000000000","lng":"-3.18826700000000000000","place_id":"ChIJIyaYpQC4h0gRJxfnfHsU8mQ","created":"2019-08-08 14:42:35","modified":"2019-08-08 14:42:35","contact_name":"","contact_phone":""},{"id":"1","address":"Glasgow, UK","appartment_no":"","street_number":"","postal_town":"Glasgow","route":"","administrative_area_level_2":"Glasgow City","administrative_area_level_1":"Scotland","country":"United Kingdom","postal_code":"","lat":"55.86423700000000000000","lng":"-4.25180600000000000000","place_id":"ChIJ685WIFYViEgRHlHvBbiD5nE","created":"2019-08-05 10:05:20","modified":"2019-08-05 10:05:20","contact_name":"","contact_phone":""}],"quote":{"id":"17","total":"150.04","rate_unit":"0.00","rate_hour":"0.00","rate_tax":"0.00","basic_cost":"150.04","distance_cost":"150.04","time_cost":"0.00","notice_cost":"0.00","tax_cost":"0.00","breakdown":"[{\\\"distance\\\":\\\"0.00\\\",\\\"distance_cost\\\":0,\\\"type\\\":\\\"set amount\\\",\\\"rate\\\":\\\"0.00\\\",\\\"cost\\\":\\\"0.00\\\"},{\\\"distance\\\":75.02,\\\"distance_cost\\\":150.04,\\\"type\\\":\\\"per distance unit\\\",\\\"rate\\\":\\\"2.00\\\",\\\"cost\\\":150.04},{\\\"distance\\\":0,\\\"distance_cost\\\":150.04,\\\"type\\\":\\\"per distance unit\\\",\\\"rate\\\":\\\"2.00\\\",\\\"return_percentage\\\":\\\"100\\\",\\\"cost\\\":0}]","rates":"standard","created":"2019-08-12 16:47:41","modified":"2019-08-12 16:47:41"},"job_date":[{"label":"Pick Up Date","value":"August 12, 2019"},{"label":"Pick Up Time","value":"5:00 pm"}],"payment":[{"label":"Payment Method","value":"On Delivery"},{"label":"Payment Status","value":"Due"}]}',true);

        $this->test_job = json_decode('{"id":"17","delivery_contact_name":"","delivery_time":"2019-08-12 17:00:00","description":"54ew5","dimensions":"","customer_id":"4","accepted_quote_id":"17","payment_type_id":"1","payment_status_id":"1","status_type_id":"1","vehicle_id":"1","service_id":"1","move_size_id":"0","created":"2019-08-12 16:47:41","modified":"2019-08-12 16:47:41","customer":{"id":"4","wp_user_id":"0","first_name":"sdfdsf","last_name":"dsfdsfd","email":"sdfdsf@dsfdsf.com","phone":"435345345","created":"2019-08-12 16:47:41","modified":"2019-08-12 16:47:41"},"journey":{"id":"17","job_id":"17","distance":"75.0200","time":"1.09","deliver_and_return":null,"optimize_route":null,"created":"2019-08-12 16:47:41","modified":"2019-08-12 16:47:41"},"stops":[{"id":"7","address":"Edinburgh, UK","appartment_no":"","street_number":"","postal_town":"","route":"","administrative_area_level_2":"Edinburgh","administrative_area_level_1":"Scotland","country":"United Kingdom","postal_code":"","lat":"55.95325200000000000000","lng":"-3.18826700000000000000","place_id":"ChIJIyaYpQC4h0gRJxfnfHsU8mQ","created":"2019-08-08 14:42:35","modified":"2019-08-08 14:42:35","contact_name":"","contact_phone":""},{"id":"1","address":"Glasgow, UK","appartment_no":"","street_number":"","postal_town":"Glasgow","route":"","administrative_area_level_2":"Glasgow City","administrative_area_level_1":"Scotland","country":"United Kingdom","postal_code":"","lat":"55.86423700000000000000","lng":"-4.25180600000000000000","place_id":"ChIJ685WIFYViEgRHlHvBbiD5nE","created":"2019-08-05 10:05:20","modified":"2019-08-05 10:05:20","contact_name":"","contact_phone":""}],"quote":{"id":"17","total":"150.04","rate_unit":"0.00","rate_hour":"0.00","rate_tax":"0.00","basic_cost":"150.04","distance_cost":"150.04","time_cost":"0.00","notice_cost":"0.00","tax_cost":"0.00","rates":"standard","created":"2019-08-12 16:47:41","modified":"2019-08-12 16:47:41"},"job_date":[{"label":"Pick Up Date","value":"August 12, 2019"},{"label":"Pick Up Time","value":"5:00 pm"}],"payment":[{"label":"Payment Method","value":"On Delivery"},{"label":"Payment Status","value":"Due"}]}',true);

		$this->expected_output = urldecode('%3Cdiv+id%3D%22job_details%22+class%3D%22job-details%22%3E%0D%0A%09%3Cdiv+class%3D%22row%22%3E%0D%0A%09%09%09%09%09%3Cdiv+class%3D%22half+job_details_customer%22%3E%0D%0A%09%09%09%09%3Ctable%3E%3Ctbody%3E%3Ctr%3E%3Cth+colspan%3D%222%22%3E%3Ch3%3ECustomer+Details%3C%2Fh3%3E%3C%2Fth%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EFirst+Name%3C%2Ftd%3E%3Ctd%3Esdfdsf%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3ELast+Name%3C%2Ftd%3E%3Ctd%3Edsfdsfd%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EEmail+Address%3C%2Ftd%3E%3Ctd%3Esdfdsf%40dsfdsf.com%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EPhone+Number%3C%2Ftd%3E%3Ctd%3E435345345%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%09%09%09%3C%2Fdiv%3E%0D%0A%09%09%09%3Cdiv+class%3D%22half+job_details_job%22%3E%0D%0A%09%09%09%09%3Ctable%3E%3Ctbody%3E%3Ctr%3E%3Cth+colspan%3D%222%22%3E%3Ch3%3EJob+Details%3C%2Fh3%3E%3C%2Fth%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EDelivery+Details%3C%2Ftd%3E%3Ctd%3E54ew5%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EService%3C%2Ftd%3E%3Ctd%3EStandard%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EVehicle%3C%2Ftd%3E%3Ctd%3EVan%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%09%09%09%3C%2Fdiv%3E%0D%0A%09%09%09%09%09%3C%2Fdiv%3E%0D%0A%09%09%0D%0A%0D%0A%09%09%09%3Cdiv+class%3D%22row%22%3E%0D%0A%09%09%09%3Cdiv+class%3D%22full+job_details_job%22%3E%0D%0A%09%09%09%3Ctable%3E%3Ctbody%3E%3Ctr%3E%3Cth+colspan%3D%221%22%3E%3Ch3%3ERoute%3C%2Fh3%3E%3C%2Fth%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3E%3Cul+class%3D%22tq-list%22%3E%3Cli%3EEdinburgh%2C+UK%3C%2Fli%3E%3Cli%3EUnit+No%3A+%3C%2Fli%3E%3Cli%3E%3C%2Fli%3E%3Cli%3EContact+Name%3A+%3C%2Fli%3E%3Cli%3E%3C%2Fli%3E%3Cli%3E55.95325200000000000000%3C%2Fli%3E%3Cli%3E-3.18826700000000000000%3C%2Fli%3E%3C%2Ful%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3E%3Cul+class%3D%22tq-list%22%3E%3Cli%3EGlasgow%2C+UK%3C%2Fli%3E%3Cli%3EUnit+No%3A+%3C%2Fli%3E%3Cli%3E%3C%2Fli%3E%3Cli%3EContact+Name%3A+%3C%2Fli%3E%3Cli%3E%3C%2Fli%3E%3Cli%3E55.86423700000000000000%3C%2Fli%3E%3Cli%3E-4.25180600000000000000%3C%2Fli%3E%3C%2Ful%3E%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%09%09%09%3C%2Fdiv%3E%0D%0A%09%09%3C%2Fdiv%3E%0D%0A%09+%0D%0A%09%3Cdiv+class%3D%22row%22%3E%0D%0A%09%09%09%3Cdiv+class%3D%22third+job_details_date%22%3E%0D%0A%09%09%09%3Ctable%3E%3Ctbody%3E%3Ctr%3E%3Cth+colspan%3D%222%22%3E%3Ch3%3EPick+Up+Date+and+Time%3C%2Fh3%3E%3C%2Fth%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EPick+Up+Date%3C%2Ftd%3E%3Ctd%3EAugust+12%2C+2019%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EPick+Up+Time%3C%2Ftd%3E%3Ctd%3E5%3A00+pm%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%09%09%3C%2Fdiv%3E%0D%0A%09%09%09%09%09%09%3Cdiv+class%3D%22third+job_details_journey%22%3E%0D%0A%09%09%09%3Ctable%3E%3Ctbody%3E%3Ctr%3E%3Cth+colspan%3D%222%22%3E%3Ch3%3EDistance+and+Travel+Time%3C%2Fh3%3E%3C%2Fth%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EDistance+%28Miles%29%3C%2Ftd%3E%3Ctd%3E75.02%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EEstimated+Travel+Time+%28Hours%29%3C%2Ftd%3E%3Ctd%3E1.09%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%09%09%3C%2Fdiv%3E%0D%0A%09%09%09%09%09%09%3Cdiv+class%3D%22third+job_details_quote%22%3E%0D%0A%09%09%09%3Ctable%3E%3Ctbody%3E%3Ctr%3E%3Cth+colspan%3D%222%22%3E%3Ch3%3EQuote%3C%2Fh3%3E%3C%2Fth%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EDistance+Cost%3C%2Ftd%3E%3Ctd%3E150.04%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EHourly+Rate+%28GBP%29%3C%2Ftd%3E%3Ctd%3E0.00%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3ETime+Cost+%28GBP%29%3C%2Ftd%3E%3Ctd%3E0.00%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3ESubtotal+%28GBP%29%3C%2Ftd%3E%3Ctd%3E150.04%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EVAT+Rate+%28%25%29%3C%2Ftd%3E%3Ctd%3E0.00%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3EVAT+%28GBP%29%3C%2Ftd%3E%3Ctd%3E0.00%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3ETotal+%28GBP%29%3C%2Ftd%3E%3Ctd%3E150.04%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3ERates%3C%2Ftd%3E%3Ctd%3EStandard%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%09%09%3C%2Fdiv%3E%0D%0A%09%09%09%3C%2Fdiv%3E%0D%0A%3C%2Fdiv%3E%09');

        $this->labels = json_decode('{"contact_section_title":"Your Contact Information","search_section_title":"Delivery Addresses","map_title":"Address Locations","quote_section_title":"Quote","quote_label":"Your Quote","description":"Delivery Details","collection_date_label":"Collection Date","collection_time_label":"Collection Time","collection_address_label":"Collection Address","destination_address_label":"Destination Address","cant_find_address_text":"I can\'t find my address","first_name":"First Name","last_name":"Last Name","phone":"Phone Number","email":"Email Address","service_id":"Service","view_service_link_text":"View Service Details..","vehicle_id":"Vehicle","view_vehicle_link_text":"View Vehicle Details..","journey_title":"","payment_info_header":"","distance":"Distance","time":"Estimated Travel Time","optimize_route_label":"","deliver_and_return_label":"","appartment_no":"Unit No","street_number_label":"","route_label":"Route","postal_town_label":"","administrative_area_level_2_label":"","administrative_area_level_1_label":"","country_label":"","postal_code_label":"Postal Code","date_and_time_title":"Date and Time","hourly_hire_rate_label":"","hourly_rate_label":"","hourly_cost_label":"","contact_name":"Contact Name","contact_phone_label":"Contact Phone","short_notice_cost_label":"Short Notice Cost","extra_destination_surcharge_label":"Extra Destination Surcharge","sub_total_label":"Subtotal","days_hired_label":"Days Hired","hours_hired_label":"Hours Hired","route_heading_label":"Route","delivery_cost_label":"Delivery Cost","total_cost_label":"Total Cost","tax_name":"VAT","distance_cost":"Distance Cost","rate_hour":"Hourly Rate (GBP)","time_cost":"Time Cost (GBP)","basic_cost":"Subtotal (GBP)","rate_tax":"VAT Rate (%)","tax_cost":"VAT (GBP)","total":"Total (GBP)","rates":"Rates"}', true);

        $this->test_filter_status_types_data = json_decode('{"filter_status_types[]":"7","action":"filter_status_types","from_date":"2019-07-27","to_date":"2019-08-27","orderby":"","order":""}', true);

        $this->plugin_admin = new TransitQuote_Pro_Admin( 'TransitQuote Pro',  4, 'transitquote-pro');
    }

    public function test_filter_status_types(){
       
        $_REQUEST = $this->test_filter_status_types_data;

        $this->plugin_admin->filter_status_types();

        $this->assertEquals(0, $this->plugin_admin->no_table_rows);
        $this->assertTrue(is_array($this->plugin_admin->load_table_params));
     //   $this->assertTrue(count($this->plugin_admin->load_table_params['data'])>0);
        $this->assertTrue(is_string($this->plugin_admin->jobs_table_html));
     //   $this->assertTrue(count($this->plugin_admin->load_table_params['data'])===1);


        foreach ($this->plugin_admin->load_table_params['data'] as $key => $job) {
            $this->assertTrue(($job['status_type_id']==='7'),  ' incorrect status_type_id for filter 7: ',$job['status_type_id']);
        };

    }

  /*  public function test_render_job_details(){

        $this->plugin_admin->labels = $this->labels;
        $this->plugin->labels = $this->labels;
    	$this->plugin_admin->job = $this->test_job;
		$this->plugin_admin->distance_unit= 'Mile';
    	$this->plugin_admin->render_job_details();


       // echo '>>>>>>>>'.$this->expected_output.'<<<<<<<<<<<<';
       // echo '>>>>>>>>'.urlencode($this->plugin_admin->job_details_html).'<<<<<<<<<<<<';
    	$this->assertEquals($this->expected_output,$this->plugin_admin->job_details_html);

    	$this->assertTrue(is_string($this->plugin_admin->job_details_html));

    }
*/
}
?>